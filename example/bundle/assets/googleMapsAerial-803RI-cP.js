import{S as f,W as h,a as R,i as l,R as P}from"./three.module-DpclfMcJ.js";import{G as y}from"./GLTFLoader-DkJa3Jo5.js";import{D}from"./DRACOLoader-DJWREZh5.js";import{g as L}from"./lil-gui.module.min-Bc0DeA9g.js";import{O as A}from"./OrbitControls-DEr5g9Mg.js";import{T}from"./TileCompressionPlugin-LPgvgQPx.js";import{T as x}from"./TilesFadePlugin-CYp6zEtB.js";import{T as C}from"./TilesRenderer-3GzfWA9Z.js";import{G as E}from"./GoogleCloudAuthPlugin-gv3hNYxX.js";import{W as G}from"./I3DMLoader-BlebwdUJ.js";import{t as S}from"./Ellipsoid-Cnb0UTwk.js";import"./B3DMLoader-B2OeBq6-.js";import"./readMagicBytes-Da5ueiou.js";import"./LoaderBase-CVSPpjX2.js";import"./PNTSLoader-BMN5TswI.js";import"./CMPTLoader-nLXQ3OXQ.js";import"./GLTFExtensionLoader-TubLlshp.js";import"./EllipsoidRegion-D6hT1syi.js";let t,n,d,i,e;const W=new P;W.firstHitOnly=!0;const b=localStorage.getItem("googleApiKey")??"put-your-api-key-here",m={apiKey:b,reload:g};v();w();function g(){localStorage.setItem("googleApiKey",m.apiKey),e&&(d.remove(e.group),e.dispose(),e=null),e=new C,e.registerPlugin(new E({apiToken:m.apiKey})),e.registerPlugin(new T),e.registerPlugin(new x),e.setLatLonToYUp(35.6586*l.DEG2RAD,139.7454*l.DEG2RAD);const o=new D;o.setDecoderPath("https://unpkg.com/three@0.153.0/examples/jsm/libs/draco/gltf/");const r=new y(e.manager);r.setDRACOLoader(o),e.manager.addHandler(/\.gltf$/,r),d.add(e.group),e.setResolutionFromRenderer(t,i),e.setCamera(t)}function v(){d=new f,i=new h({antialias:!0}),i.setClearColor(1383455),document.body.appendChild(i.domElement),t=new R(60,window.innerWidth/window.innerHeight,100,16e5),t.position.set(1e3,1e3,1e3).multiplyScalar(.5),n=new A(t,i.domElement),n.minDistance=500,n.maxDistance=1e4*2,n.minPolarAngle=0,n.maxPolarAngle=3*Math.PI/8,n.enableDamping=!0,n.autoRotate=!0,n.autoRotateSpeed=.5,n.enablePan=!1,g(),c(),window.addEventListener("resize",c,!1),window.addEventListener("hashchange",u);const o=new L;o.width=300,o.add(m,"apiKey"),o.add(m,"reload"),o.open(),u()}function c(){t.aspect=window.innerWidth/window.innerHeight,i.setSize(window.innerWidth,window.innerHeight),t.updateProjectionMatrix(),i.setPixelRatio(window.devicePixelRatio)}function u(){const r=window.location.hash.replace(/^#/,"").split(/,/g).map(s=>parseFloat(s));if(r.length!==2||r.findIndex(s=>Number.isNaN(s))!==-1)return;const[p,a]=r;e.setLatLonToYUp(p*l.DEG2RAD,a*l.DEG2RAD)}function w(){requestAnimationFrame(w),e&&(n.update(),e.setResolutionFromRenderer(t,i),e.setCamera(t),t.updateMatrixWorld(),e.update(),F())}function F(){var o;if(i.render(d,t),e){const r=e.group.matrixWorld.clone().invert(),p=t.position.clone().applyMatrix4(r),a={};G.getPositionToCartographic(p,a);const s=((o=e.getAttributions()[0])==null?void 0:o.value)||"";document.getElementById("credits").innerText=S(a.lat,a.lon)+`
`+s}}
