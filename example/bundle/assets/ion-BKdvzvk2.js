import{d as g,k as d}from"./three.module-DpclfMcJ.js";import{c as x,j as e,r as b,C as k,T as f,a as s,E as P,b as C}from"./CameraControls-DSY_Wd5L.js";import{u as v,G as j,T as y}from"./leva.esm-DWiqsDYb.js";import{O as E}from"./Ellipsoid-Cnb0UTwk.js";import{U as T}from"./UpdateOnChangePlugin-BFotcVNs.js";import{D as L}from"./DRACOLoader-DJWREZh5.js";import{C as M}from"./CesiumIonAuthPlugin-Bj8zlFQw.js";import{G as I,a as w}from"./GizmoViewport-TrVCLEIg.js";import"./EnvironmentControls-CYEuz71t.js";import"./GlobeControls-tcF-lZFC.js";import"./TilesRenderer-3GzfWA9Z.js";import"./I3DMLoader-BlebwdUJ.js";import"./readMagicBytes-Da5ueiou.js";import"./LoaderBase-CVSPpjX2.js";import"./GLTFLoader-DkJa3Jo5.js";import"./B3DMLoader-B2OeBq6-.js";import"./PNTSLoader-BMN5TswI.js";import"./CMPTLoader-nLXQ3OXQ.js";import"./GLTFExtensionLoader-TubLlshp.js";import"./EllipsoidRegion-D6hT1syi.js";import"./GLTFMeshFeaturesExtension-D473cUUw.js";import"./Pass-inUSP30K.js";import"./GoogleCloudAuthPlugin-gv3hNYxX.js";const l=new g,m=new d;class z{constructor(t){t={up:"+z",recenter:!0,lat:null,lon:null,height:0,...t},this.tiles=null,this.up=t.up.toLowerCase().replace(/\s+/,""),this.lat=t.lat,this.lon=t.lon,this.height=t.height,this.recenter=t.recenter,this._callback=null}init(t){this.tiles=t,this._callback=()=>{const{up:i,lat:a,lon:r,height:n,recenter:u}=this;if(a!==null&&r!==null)this.transformLatLonHeightToOrigin(a,r,n);else{const{ellipsoid:p}=t,h=Math.min(...p.radius);if(t.getBoundingSphere(l),l.center.length()>h*.5){const o={};p.getPositionToCartographic(l.center,o),this.transformLatLonHeightToOrigin(o.lat,o.lon,o.height)}else{const o=t.group;switch(o.rotation.set(0,0,0),i){case"x":case"+x":o.rotation.z=Math.PI/2;break;case"-x":o.rotation.z=-Math.PI/2;break;case"y":case"+y":break;case"-y":o.rotation.z=Math.PI;break;case"z":case"+z":o.rotation.x=-Math.PI/2;break;case"-z":o.rotation.x=Math.PI/2;break}t.group.position.copy(l.center).applyEuler(o.rotation).multiplyScalar(-1)}}u||t.group.position.setScalar(0),t.removeEventListener("load-tile-set",this._callback)},t.addEventListener("load-tile-set",this._callback)}transformLatLonHeightToOrigin(t,i,a=0){const{group:r,ellipsoid:n}=this.tiles;n.getRotationMatrixFromAzElRoll(t,i,0,0,0,r.matrix,E),n.getCartographicToPosition(t,i,a,m),r.matrix.setPosition(m).invert().decompose(r.position,r.quaternion,r.scale),r.updateMatrixWorld()}dispose(){const{group:t}=this.tiles;t.position.setScalar(0),t.quaternion.identity(),t.scale.set(1,1,1),this.tiles.addEventListener("load-tile-set",this._callback)}}const R=new L().setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");function S(){const c={apiToken:{value:localStorage.getItem("ion-token")||"put-your-api-key-here",onChange:a=>localStorage.setItem("ion-token",a),transient:!1},assetId:{value:"40866",options:{"Aerometrex - San Francisco":"1415196","Aerometrex - Denver":"354307","New York City 3D Buildings":"75343","Melbourne Photogrammetry":"69380","Cesium HQ":"40866","Melbourne Point Cloud":"43978","Montreal Point Cloud":"28945"}}},{apiToken:t,assetId:i}=v(c);return e.jsxs(k,{frameloop:"demand",camera:{position:[300,300,300],near:1,far:1e5},style:{width:"100%",height:"100%",position:"absolute",margin:0,left:0,top:0},children:[e.jsxs(f,{children:[e.jsx(s,{plugin:M,args:{apiToken:t,assetId:i}}),e.jsx(s,{plugin:j,dracoLoader:R}),e.jsx(s,{plugin:z}),e.jsx(s,{plugin:T}),e.jsx(y,{})]},i+t),e.jsx(P,{enableDamping:!0,maxDistance:5e3}),e.jsx(C,{preset:"sunset",background:!0,backgroundBlurriness:.9,environmentIntensity:1}),e.jsx(I,{alignment:"bottom-right",children:e.jsx(w,{})})]})}x(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(S,{})}));
